# 운영체제와 컴퓨터

## 관련 질문
<details>
  <summary>
    하드웨어와 유저 프로그램 사이가 운영체제의 영역입니다. 이 운영체제가 어떤 구조로 이뤄져있는지 설명해주세요
  </summary>
  <blockquote>
    유저 프로그램 아래에 인터페이스(GUI, CUI)가 있고, 그 아래에 시스템콜 영역이 있습니다. 가장 하단에는 커널이라는 드라이버와 파일 시스템이 있습니다.<br/>
    이렇게 운영체제의 영역이 끝나고 아래쪽에 하드웨어가 존재합니다.
  </blockquote>
</details>
<br/>
<details>
  <summary>시스템콜이란 무엇인가요?</summary>
  <blockquote>
    시스템콜이란 유저 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출할 때 사용되는 인터페이스입니다.<br/>
    예를 들어 유저가 파일을 읽는 동작을 실행하려고 한다면 유저는 파일을 클릭하는 행동까지만 가능하고 실제 파일을 읽는 함수는 커널 모드에서 실행됩니다. 그렇게 커널 모드에서 시스템이 파일을 읽고 다시 유저 모드로 전환되어 이후 단계가 진행되는데 이렇게 커널 함수를 호출하는 인터페이스를 시스템콜이라 합니다.
  </blockquote>
</details>
<br/>
<details>
  <summary>운영체제의 역할을 세 가지만 말해주세요.</summary>
  <blockquote>
    대표적인 역할로 CPU 스케줄링과 프로세스 관리, 메모리 관리, 디스크 파일 관리가 있습니다.
  </blockquote>
</details>
<br/>

<hr/>

## 운영체제란?
> Operating System, 사용자가 컴퓨터를 쉽게 다루게 해주는 인터페이스

<br/>

## 운영체제의 역할
> 운영체제는 크게 네 가지 역할로 나뉜다.

1. CPU 스케줄링과 프로세스 관리
2. 메모리 관리
3. 디스크 파일 관리
4. I/O 디바이스 관리

<br/>

## 운영체제의 구조
![운영체제의 구조](https://github.com/baniCsStudy/csStudy/assets/122072805/1a54a92b-04cf-43e8-9786-77e561e732ef)

> 운영체제의 구조는 위 사진처럼 되어있다. 최상단에 유저 프로그램이, 가장 하단에 하드웨어가 존재하며 가운데 GUI부터 드라이버까지의 부분을 운영체제라고 지칭한다.

### GUI/CUI
> 사용자가 컴퓨터와 상호작용할 수 있도록하는 인터페이스

- GUI : 단순 명령어 창이 아닌 아이콘을 마우스로 클릭하는 것과 같이 어떠한 동작으로 컴퓨터와 상호 작용하게 하는 인터페이스
- CUI : 그래픽이 아닌 명령어로 컴퓨터와 상호 작용하는 인터페이스

### 시스템콜
- 운영체제가 커널에 접근하기 위한 인터페이스

```
커널이란? : 운영체제의 핵심 부분

커널은 시스템콜 인터페이스를 제공하며 보안, 메모리, 프로세스, 파일 시스템, I/O 디바이스, I/O 요청 관리 등 운영체제의 중추적인 역할을 한다.
```

> 그래서 시스템콜이 대체 뭐냐?<br/><br/>
간단하게 설명하면 유저가 사용하는 영역인 유저 영역이 존재하고, 하드웨어가 다뤄지는 커널 영역이 존재한다.<br/>
두 영역을 이어주는 역할을 수행하는 것이 OS이고 유저 영역에서 호출한 명령을 커널 영역으로 전달해서 호출해주는 역할을 시스템콜이 한다.
<details>
  <summary>예시를 이용한 긴 설명</summary>
  <blockquote>
    컴퓨터에서 사용하는 메모장을 생각해보자.<br/>
    메모장에 "안녕하세요"라고 작성한 뒤 바탕화면에 저장을 하면 나중에 다시 저장한 메모를 켰을 때 우리가 작성한 "안녕하세요"라는 글을 볼 수 있다.<br/><br/>
    그렇다면 "안녕하세요"라는 글자가 컴퓨터 하드웨어에 저장되는걸까?<br/>
    당연히 아니다. 하드웨어에는 0과 1의 비트로 저장이 된다. 글자 뿐만 아니라 해당 메모장이 저장된 주소까지 비트로 저장된다.<br/><br/>
    이렇게 하드웨어에 비트로 저장되었기에 우리가 메모장이 저장된 주소를 비트로 입력해서 open하는 명령어까지 실행해준다면 메모장을 열어 내용을 확인할 수 있을 것이다.<br/>
    하지만 사용자가 일일히 비트로 기억하기란 너무 어렵기에 우리는 바탕화면에 메모장을 클릭하는 것으로 내용을 확인한다.<br/><br/>
    앞서 설명한 유저 영역이 바로 이런 영역이고 커널 영역이 하드웨어와 직접으로 연결되는 영역이다.<br/>
    우리가 메모장을 클릭함으로써 해당 메모장의 주소와 내용을 불러올 수 있는 것이 시스템콜이 커널 모드에서 해당 메모리를 호출해줬기에 가능한 일이다.
  </blockquote>
</details>

<br/>

#### 시스템콜의 사용 이유
> 사용의 편리함도 있지만 영역을 두 개로 나누면서 보안성이 증가했다.<br/>
modebit라는 플래그 변수가 존재하는데 이 변수는 0과 1의 값을 가진다.<br/>
이 값으로 유저 모드와 커널 모드를 구분하는데, 유저 모드인 상태에서는 하드웨어의 자원을 사용할 수 없게 설정되어 있다.<br/>
유저의 상호작용으로 시스템콜이 호출되면 그때 modebit가 변경되어 커널 모드로 전환되고 이것을 바탕으로 하드웨어 자원에 접근이 가능해진다.

<br/>

## 컴퓨터의 요소
컴퓨터의 요소 다섯 가지

- CPU
- DMA 컨트롤러
- 메모리
- 타이머
- 디바이스 컨트롤

### CPU
- Central Processing Unit
- 산술논리연산장치, 제어장치, 레지스터로 구성
> CPU란 인터럽트에 의해 단순히 메모리에 존재하는 명령어를 해석해서 실행하는 일꾼이다.<br/>
커널이 프로그램을 메모리에 올려서 프로세스로 만들면 일꾼인 CPU가 처리한다.

#### 제어장치
- CU(Control Unit)
- 프로세스 조작을 지시하는 CPU의 한 부품
> 제어장치는 CPU에서 입출력장치 간 통신을 제어하고 명령어들을 일고 해석하며 데이터 처리를 위한 순서를 결정한다.

#### 레지스터
- CPU 안에 있는 매우 빠른 임시기억장치

> 레지스터는 CPU와 직접 연결되어 연산 속도가 메모리보다 수십 배에서 수백 배까지 빠르다.<br/>
CPU는 자체적으로 데이터를 저장하지 못 하기에 레지스터를 거쳐 데이터를 전달한다.

#### 산술논리연산장치
- ALU(Arithmetic Logic Unit)
- 덧셈, 뺄셈 같은 두 숫자의 산술 연산과 배타적 논리합, 논리곱 같은 논리 연산을 계산하는 디지털 회로

**CPU가 연산하는 과정**
1. 제어장치가 메모리와 레지스터에 계산할 값을 각각 로드한다.
2. 제어장치가 레지스터에 있는 값을 계산하라고 산술논리연산장치에 명령한다.
3. 제어장치가 계산된 값을 레지스터에서 메모리로 저장한다.

#### 인터럽트
- 어떤 신호가 들어왔을 때 CPU를 잠깐 정지시키는 것
- 인터럽트 간에 우선순위 존재
- 하드웨어 인터럽트, 소프트웨어 인터럽트 두 가지로 나뉨

> 인터럽트는 키보드, 마우스 등 IO 디바이스로 인한 인터럽트, 0으로 숫자를 나누는 산술 연산에서의 인터럽트, 프로세스 오류 등이 있다.

**하드웨어 인터럽트**
- 키보드를 연결하거나 마우스를 연결하는 일 등 IO 디바이스에서 발생한다

**소프트웨어 인터럽트**
- 트랩(trap)이라고 부른다
- 프로세스 오류 등 프로세스가 시스템콜을 호출할 때 발동한다

### DMA 컨트롤러
- I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치

> DMA 컨트롤러의 존재 이유는 CPU의 부담을 줄이기 위해서이다.<br/>
CPU에만 너무 많은 인터럽트 요청이 들어오기 때문에 부하가 발생할 수 있어서 CPU의 부하를 막아주며 CPU의 일을 부담하는 보조 일꾼의 역할을 수행한다.<br/>
또한, 하나의 작업을 CPU와 동시에 처리하지 않는다.

### 메모리
- 전자회로에서 데이터나 상태, 명령어 등을 기록하는 장치
- CPU는 계산 담당, 메모리는 기억 담당
- 일반적으로 RAM을 메모리라고 표현

> 공장으로 비유하면 CPU는 일꾼이고, 메모리는 작업장이며, 작업장의 크기는 메모리의 크기로 비유할 수 있다.<br/>
작업장이 클수록 물건을 많이 가져다놓고 많은 일을 할 수 있듯이 메모리가 클수록 많은 일을 동시에 할 수 있다.

### 타이머
- 특정 프로그램에 시간제한을 다는 역할
- 시간이 많이 걸리는 프로그램이 작동할 때 제한을 걸기 위해 존재

### 디바이스 컨트롤러
- 컴퓨터와 연결되어 있는 IO 디바이스들의 작은 CPU를 말한다
- 로컬 버퍼는 각 디바이스에서 데이터를 임시로 저장하기 위한 작은 메모리를 의미한다.
