## 관련 질문
<details>
  <summary>(현수) 트랜잭션이란 무엇이며, 격리 수준 4가지와 각 단계에서 발생할 수 있는 현상 설명</summary>
  <blockquote>
    (지원) 트랜잭션은 여러 작업들을 하나로 묶어서 실행하는 것으로 모두 성공하거나 모두 실패해야 함, 리드언커밋티드는 가장 낮은 격리 수준으로 다른 트랜잭션의 미완료데이터를 읽을 수 있어 더티리드 발생, 리드 커밋티드는 커밋된것만 읽을 수 있어 반복가능한 읽기가 보장되지 않는다, 리피터블리드는 항상 동일한 결과를 보장하지만 팬텀리드가 발생할 수 있고, 시리얼라이저블은 가장 높은 격리 수준으로 모든 트랜잭션을 순차적으로 처리.
  </blockquote>   
  <br/>
  <blockquote>
    (주현) 트랜잭션은 데이터베이스가 변하기 위해 논리적 기능을 수행하기 위한 작업 단위. 이런 작업이 이뤄질 때 한번에 이루어져야 하는 연산이고, 격리성 수준이 4가지인데 격리성이 가장 높은 시리얼라이저블에서  리드언커밋까지 4단계가 있고 팬텀리드, 반복가능한 리드, 더티리드가 있다.
  </blockquote>     
</details>
<br/>
<details>
  <summary>(주현) 트랜잭션의 4가지 특징을 간단히 설명하시오.</summary>
  <blockquote>
    (현수) 트랜잭션의 4가지 특징을 acid라고 한다. 먼저 원자성은 트랜잭션 내부의 작업들이 모두 반영되거나, 전혀 반영되지 않아서 데이터의 무결성을 유지하는 것이다. 일관성은 트랜잭션이 반영된 이후 DB의 일관성이 깨지면 안된다는 것인데, 예를 들어 가격이 0원 이상이라는 제약조건이 있는 필드에 -1000을 넣으려는 연산이 수행되서는 안된다는 것이다. 독립성은 동시에 실행되는 트랜잭션끼리 서로 영향을 미치면 안된다는 것이고, 지속성은 트랜잭션은 DB에 영구적으로 반영되어야 한다는 것이다. 예를 들어 물리적으로 DB가 다운됐을 때도 그 이전 상태로 복귀 가능해야 한다는 것이다.
  </blockquote>   
  <br/>
</details>

## 트랜잭션과 무결성

트랜잭션은 데이터베이스에서 하나의 논리적 기능을 수행하기 위한 작업의 단위를 말하며, 하나의 트랜잭션은 보통 여러 개의 sql문으로 구성된다. 

### ACID

- **원자성**
  - 트랜잭션 내부 작업들을 수행한 후 commit하여 모두 반영시키거나, 중간에 잘못된 작업이 있을 경우 rollback하여 트랜잭션 이전 상태로 돌려 전혀 반영시키지 않아야 한다는 것이다.

- **일관성**
    - 허용된 방식으로만 데이터를 변경해야 한다. 0원을 가지고 있는 '모은'이가 1000원을 이체할 수 없다.
    
- **격리성**
    - 동시에 실행되는 트랜잭션은 서로 끼어들지 못한다.

- **지속성**
    - 성공적으로 수행된 트랜잭션은 DB에 영구적으로 반영되어야 한다.

### Isolation Level

* 팬텀 리드
  - 한 트랜잭션 내에서 같은 조건으로 두 번 쿼리를 보냈을 때 조회 결과가 다른 경우
* non-repeatable read
  - 한 트랜잭션 내에서 같은 레코드에 두 번 이상의 조회를 했을 때 그 결과가 각각 다른 경우
* dirty read
  - 트랜잭션 수행 중 다른 트랜잭션에 의해 수정 후 커밋되지 않은 데이터를 읽는 경우

1. serializable
  - 가장 엄격한 격리 수준으로 트랜잭션을 순차적으로 진행하는 것이다. 격리성은 높아지고 동시성은 떨어져서 가장 성능이 떨어진다.
2. repeatable read
  - 한 트랜잭션이 수정한 행을 다른 트랜잭션이 수정하는 것을 막아주지만 새로운 행을 추가할 순 있다. 따라서 phantom read가 일어날 수 있다.
3. read_committed
  - 가장 많이 사용되는 격리 수준으로, 커밋 완료된 데이터만 읽을 수 있다. 한 트랜잭션이 접근한 행을 다른 트랜잭션이 수정할 수 있기 때문에 phantom read, non-repeatable read가 일어날 수 있다.
4. read_uncommitted
  - 가장 낮은 격리 수준으로, 하나의 트랜잭션이 커밋되기 전 다른 트랜잭션에 노출될 수 있지만 가장 빠르다. 따라서 몇몇 행이 제대로 조회되지 않더라도 괜찮은 거대한 양의 데이터를 대략적으로 집계할 때 유용하며, phantom, non-repeatable, dirty read가 일어날 수 있다.

### 무결성

데이터의 유효성, 정확성, 일관성을 유지하는 것을 말하며, 무결성이 유지되어야 실제의 값과 저장된 데이터의 값이 일치하는지에 대한 신뢰가 생긴다.

- **개체 무결성**
  - 기본 키로 설정된 필드는 중복된 값과 null값을 가지면 안 된다.

- **참조 무결성**
  - 외래키에 해당하는 필드값들은 해당 외래키가 참조하는 필드에 반드시 존재해야 한다.
  
- **고유 무결성**
  - 고유의 값을 갖기로 제한된 필드는 그 값들만을 가져야 한다.
  
- **null 무결성**
  - null값을 가지면 안 된다는 제약이 있는 필드는 null값을 가지면 안 된다.
