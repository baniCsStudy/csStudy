# 트랜잭션과 무결정
## 트랜잭션
- DB에서 하나으 ㅣ논리기능을 수행하는 작업단위
- 여러개의 쿼리를 하나로 묶는 단위
- 원자성, 일관성, 독립성, 지속성이 있음(ACID)

### 원자성(atomimity)
- 트랜잭션이 모두 되었거나 되지 않았거나 (0 or 1)
- 모든 쿼리가 끝나고 커밋되거나(1) 롤백되거나(0)

### 일관성(consistency)
- 허용된 방식으로만 데이터가 변경됨

### 격리성(isolation)
- 트랜잭션끼리 서로 끼어들지 못함.
- 순차적으로 하면 성능이 떨어지므로 격리수준을 나누어 따로 실행함.
> - 팬텀리드 : 동일쿼리를 보냈을떄 조회결과가 다른경우(다른행이 선택)
> - 반복가능하지 않은 조회 : 같은행에 두번이상 조회했을떄 값이 다른경우(같은행인데 값이 다름)
> - 더티리드 : 다른 트랜잭션이 시행중일때 값이 변경되어 커밋되지않은 값을 조회한 것
- 격리수준은 serializable, repeatable_read, read_committed, read_uncommitted 가 있고 read_committed가 많이 사용됨

### 지속성(durability)
- 한번 수행된 트랜잭션은 영구적으로 반영되어야함.
- 시스템 장애가 발생하더라도 복구하는 회복기능이 필요함.(체크섬, 저널링, 롤백 등)
> - 체크섬 : 중복검사
> - 저널링 : 커밋하기전에 로깅하는것, 트랜잭션변경에 대한 로그를 남기는것

## 무결성
- 데이터의 정확성, 일관성, 유효성을 유지하는것
- 무결성이 유지되어야 데이터에 대한 신뢰가 발생
1. 개체무결성 : 기본키는 null을 허용하지 않음
2. 참조 무결성 : 서로 참조하는 두테이블의 데이터는 항상 일관되어야함
3. 고유 무결성 : 특정 속성에 대해 고유값을 가지도록 조건이 주어진 경우 그 속성은 모두 고유해야함.
4. NULL 무결성 : NULL을 허용하지 않는 조건이 주어진 경우 NULL이 올 수 없음